<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>CPN: include/cpn/utils/StackTrace.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CPN
   </div>
   <div id="projectbrief">Computational Process Networks</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_8511042cf787152d251a40854a251ac1.html">cpn</a></li><li class="navelem"><a class="el" href="dir_9768be1ea50e10d8ab3f90ce1a35bb25.html">utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">StackTrace.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>function for printing out a stack trace Note that we need to pass -rdynamic to the linker to be able to see the function names with these functios.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="common_8h_source.html">cpn/common.h</a>&gt;</code><br/>
<code>#include &lt;string&gt;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for StackTrace.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="StackTrace_8h__incl.png" border="0" usemap="#include_2cpn_2utils_2StackTrace_8h" alt=""/></div>
<map name="include_2cpn_2utils_2StackTrace_8h" id="include_2cpn_2utils_2StackTrace_8h">
<area shape="rect" id="node2" href="common_8h.html" title="cpn/common.h" alt="" coords="90,80,208,107"/></map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="StackTrace_8h__dep__incl.png" border="0" usemap="#include_2cpn_2utils_2StackTrace_8hdep" alt=""/></div>
<map name="include_2cpn_2utils_2StackTrace_8hdep" id="include_2cpn_2utils_2StackTrace_8hdep">
<area shape="rect" id="node2" href="Exception_8cc.html" title="lib/utils/Exception.cc" alt="" coords="5,80,155,107"/><area shape="rect" id="node3" href="StackTrace_8cc.html" title="functino for printing out a stack trace lookup the backtrace etc. in the man pages. " alt="" coords="179,80,337,107"/><area shape="rect" id="node4" href="ThrowingAssert_8cc.html" title="Some implementation for assert. " alt="" coords="362,80,547,107"/></map>
</div>
</div>
<p><a href="StackTrace_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9620bfa310136ead773ef173d8f9da8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a9620bfa310136ead773ef173d8f9da8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7aeed04bb4cb6fc409ffe0144bdb8f3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="StackTrace_8h.html#a7aeed04bb4cb6fc409ffe0144bdb8f3c">PrintStack</a> ()</td></tr>
<tr class="separator:a7aeed04bb4cb6fc409ffe0144bdb8f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88724bfb9a4f87aec287dd399abd6f92"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="StackTrace_8h.html#a88724bfb9a4f87aec287dd399abd6f92">GetStack</a> (unsigned ignore=0)</td></tr>
<tr class="separator:a88724bfb9a4f87aec287dd399abd6f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>function for printing out a stack trace Note that we need to pass -rdynamic to the linker to be able to see the function names with these functios. </p>
<dl class="section author"><dt>Author</dt><dd>John Bridgman </dd></dl>

<p>Definition in file <a class="el" href="StackTrace_8h_source.html">StackTrace.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a9620bfa310136ead773ef173d8f9da8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STACKTRACE_MAXTRACE&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="StackTrace_8h_source.html#l00033">33</a> of file <a class="el" href="StackTrace_8h_source.html">StackTrace.h</a>.</p>

<p>Referenced by <a class="el" href="StackTrace_8cc_source.html#l00039">GetStack()</a>, and <a class="el" href="StackTrace_8cc_source.html#l00033">PrintStack()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a88724bfb9a4f87aec287dd399abd6f92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string GetStack </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ignore</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a std::string to the stack trace. May fail if out of memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ignore</td><td>the number of top stacks to ignore. This is useful because this function is often used in error messages and it is useless garbage to report the stack from the error handler. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="StackTrace_8cc_source.html#l00039">39</a> of file <a class="el" href="StackTrace_8cc_source.html">StackTrace.cc</a>.</p>

<p>References <a class="el" href="StackTrace_8h_source.html#l00033">STACKTRACE_MAXTRACE</a>.</p>

<p>Referenced by <a class="el" href="ThrowingAssert_8cc_source.html#l00059">__ASSERT()</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">void</span>* stack[<a class="code" href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a>];</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">size_t</span> size = backtrace(stack, <a class="code" href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">char</span> **bt = backtrace_symbols(stack, size);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">if</span> (!bt) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        perror(<span class="stringliteral">&quot;backtrace_symbols&quot;</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    std::ostringstream oss;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = ignore; i &lt; size; ++i) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        oss &lt;&lt; bt[i] &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    free(bt);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">return</span> oss.str();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="StackTrace_8h_html_a9620bfa310136ead773ef173d8f9da8a"><div class="ttname"><a href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a></div><div class="ttdeci">#define STACKTRACE_MAXTRACE</div><div class="ttdef"><b>Definition:</b> <a href="StackTrace_8h_source.html#l00033">StackTrace.h:33</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="StackTrace_8h_a88724bfb9a4f87aec287dd399abd6f92_icgraph.png" border="0" usemap="#StackTrace_8h_a88724bfb9a4f87aec287dd399abd6f92_icgraph" alt=""/></div>
<map name="StackTrace_8h_a88724bfb9a4f87aec287dd399abd6f92_icgraph" id="StackTrace_8h_a88724bfb9a4f87aec287dd399abd6f92_icgraph">
<area shape="rect" id="node2" href="ThrowingAssert_8cc.html#a6e9d27a753dc094d1cbedf36fa0d427a" title="__ASSERT" alt="" coords="137,5,223,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7aeed04bb4cb6fc409ffe0144bdb8f3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrintStack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints the stack trace to stderr Should work even if we are out of memory </p>

<p>Definition at line <a class="el" href="StackTrace_8cc_source.html#l00033">33</a> of file <a class="el" href="StackTrace_8cc_source.html">StackTrace.cc</a>.</p>

<p>References <a class="el" href="StackTrace_8h_source.html#l00033">STACKTRACE_MAXTRACE</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                  {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordtype">void</span>* stack[<a class="code" href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a>];</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordtype">size_t</span> size = backtrace(stack, <a class="code" href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    backtrace_symbols_fd(stack, size, 2);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="ttc" id="StackTrace_8h_html_a9620bfa310136ead773ef173d8f9da8a"><div class="ttname"><a href="StackTrace_8h.html#a9620bfa310136ead773ef173d8f9da8a">STACKTRACE_MAXTRACE</a></div><div class="ttdeci">#define STACKTRACE_MAXTRACE</div><div class="ttdef"><b>Definition:</b> <a href="StackTrace_8h_source.html#l00033">StackTrace.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
