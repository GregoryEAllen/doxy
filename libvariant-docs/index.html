<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>libvariant: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libvariant
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">libvariant Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This library, libvariant, provides a class called Variant. This class is a discriminating union that can contain one of the following values:</p>
<ul>
<li>a null, or no type</li>
<li>a boolean value</li>
<li>an unsigned integer</li>
<li>a signed integer</li>
<li>a floating point value</li>
<li>a string value</li>
<li>a reference to a map of string to Variant</li>
<li>a reference to a list of Variant</li>
<li>a reference to a iovec list (Blob)</li>
</ul>
<h3>Features</h3>
<ul>
<li>Scripting language like variable (Variant) in C++ (with all the upsides and downsides that implies).</li>
<li><a href="http://www.json.org/">JSON</a> serialization.</li>
<li><a href="http://yaml.org/">YAML</a> serialization. Deserialization ignores most tags.</li>
<li>plist serialization.</li>
<li>Schema validation based on <a href="http://json-schema.org/">json-schema</a>.</li>
<li>Schema lookup can be set to use libcurl to fetch remote URLs.</li>
<li>A simple argument parsing (ArgParse) class that produces a Variant from a programs arguments.</li>
<li>Experimental <a href="http://msgpack.org/">msgpack</a> serialization using <a href="https://github.com/msgpack/msgpack-c">msgpack-c</a> (disabled by default).</li>
<li>JSONPointer (RFC6901) and JSONPatch (RFC6902) implementations.</li>
</ul>
<h3>Changes for the 1.0.1 release</h3>
<ul>
<li>Cleaned up static data initialization, will no long call abort.</li>
<li>Fixed a bug related to proxy resolution when performing additional path resolution.</li>
<li>Added an ignore_payload and payload_length parameter to the payload serializer helpers.</li>
<li>Implemented proper JSONPointer lookup routines and changed the schema lookup to use them.</li>
<li>Modified ArgParse so that positional argument can be specified in loaded configuration files.</li>
<li>Added a make dist build target.</li>
<li>Other minor fixes.</li>
</ul>
<h3>Implementation details</h3>
<p>Under the hood, Variant uses an explicit vtable to implement the different behaviors with the same interface. The vtable has more types than the standard types listed above. The additional types are a reference and proxy type. There is also a class that is exposed to the user as VariantRef. Several of the functions that return a Variant return a VariantRef. A VariantRef is a Variant so const Variant &amp; can bind to a VariantRef. But, in general Variant&amp; cannot bind to VariantRef as all functions that return VariantRef, return it by value. This means that if you want a function that takes a non-const Variant as a parameter to be used as an output parameter, the function must take a VariantRef by value. VariantRef can be constructed from a Variant as well, so such a function can take either a VariantRef or Variant.</p>
<p>libvariant is <a href="https://bitbucket.org/gallen/libvariant">publicly hosted here</a>.</p>
<h2>Building </h2>
<p>This project uses CMake to generate a build system. Consult the CMake documentation for your preferred build system generation.</p>
<h3>Building on unix</h3>
<p>The default build system generated by CMake on unix is to use make. To build with make simply perform the following commands where you would like the build output: </p><pre class="fragment">cmake /path/to/libvariant/sources/
make
</pre><p>And to install: make install</p>
<p>The cmake configuration files use the standard cmake variables.</p>
<h3>Dependencies</h3>
<p>libvariant is optionally dependent on the following libraries</p>
<ul>
<li><a href="http://pyyaml.org/wiki/LibYAML">libyaml</a> to provide yaml serialization</li>
<li><a href="http://xmlsoft.org/">libxml2</a> to provide plist serialization</li>
<li><a href="http://curl.haxx.se/">libcurl</a> to provide schema web lookup</li>
<li><a href="https://github.com/msgpack/msgpack-c">msgpack-c</a> for the experimental msgpack serialization</li>
</ul>
<p>CMake variables are provided to override the default dependency behavior.</p>
<h2>Schemas </h2>
<p>This library also contains a schema validator. The language of the schema when serialized as JSON is json-schema. See json-schema.org for details about json-schema. Note the validator in this library uses the version 4 dialect. The schema for the version 4 dialect can be acquired from <a href="http://json-schema.org/draft-04/schema">http://json-schema.org/draft-04/schema</a></p>
<p>Other than a validator, there is a function to add the schema defaults to a Variant. This function goes through the schema and attempts to add the defaults specified in it to the Variant provided if a value is not already present. There are several constructs that it ignores such as not.</p>
<h3>Data generation from schemas</h3>
<p>Generating a valid set of data from schema is an interesting idea, and can be useful for testing purposes. But this problem is rather difficult in general. For example, the anyOf, oneOf, allOf, and not constructs in a schema mean that it is possible that the data generator must solve a satisfiability problem. It is well known that non-trivial satisfiability problems are NP complete. Despite this there does exists several random data generators (but they can fail to produce output or can produce output that does not validate). The following are links to two of the generators I was able to find.</p>
<ul>
<li>[<a href="http://schematic-ipsum.herokuapp.com/">http://schematic-ipsum.herokuapp.com/</a>] - a web app</li>
<li>[<a href="https://github.com/andreineculau/json-schema-random">https://github.com/andreineculau/json-schema-random</a>] - requires nodejs</li>
</ul>
<h2>API Documentation </h2>
<p>The main API is documented in the source code using the Doxygen format. The generated html documentation is served on the web at <a href="http://gallen.bitbucket.org/libvariant-docs">http://gallen.bitbucket.org/libvariant-docs</a>.</p>
<p>If you have doxygen installed, you can generate html documentation of the libvariant public interface from the source code with: </p><pre class="fragment">cd /path/to/build_dir
cmake /path/to/libvariant
make doc</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
